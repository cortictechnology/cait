var a0_0x2f93=['workspaceToDom','Events','/savenotebook','BLOCK_MOVE','log','language','controlNotInit','getAllBlocks','getInput','FieldTextInput','substring','FieldLabel','type','parentBlock_','setEnabled','domToWorkspace','genPyName','init_control','newValue','blockId','Message','init_nlp','BLOCK_DELETE','removeField','hash','on_device','length','color_name','sHomeNotInit','topic','cloud_accounts','setup_block','element','POST','visNotInit','await','brightness_pct','save','set_parameter','autosave','virtual','vision_proc','indexOf','oldValue','parameter','BLOCK_CHANGE','textToDom','oldXml','ajax','/saveworkspace','FieldDropdown','ending','setVisible','cait/vision_control','push','appendField','Python','saveName','function','/loadworkspace','init_voice','getAttribute','code','domToText','param_input','workspace_autosave.xml','none','Xml','Async\x20Functions:\x20','genPyNBName','cait/module_states','JavaScript','xml_text','init_smarthome','render','voiceNotInit','procedures_','main_block','isEnabled','async\x20function','newParentId','saveOrNot','reload','/savepythoncode','cait/voice_control','proc_param','ResetMode','getField','workspaceToCode','addReservedWords','vision_','field','init_vision','publish','getBlockById','location','BLOCK_CREATE'];(function(_0x516e34,_0x3ba09d){var _0x2f9369=function(_0x3c24b7){while(--_0x3c24b7){_0x516e34['push'](_0x516e34['shift']());}};_0x2f9369(++_0x3ba09d);}(a0_0x2f93,0x135));var a0_0x3c24=function(_0x516e34,_0x3ba09d){_0x516e34=_0x516e34-0x1c2;var _0x2f9369=a0_0x2f93[_0x516e34];return _0x2f9369;};function replaceAll(_0x8bc903,_0x269498,_0x5037cf){return _0x8bc903['replace'](new RegExp(_0x269498,'g'),_0x5037cf);}function stopVideoFeed(){var _0x2ff0a7=a0_0x3c24;topicMessage=new Paho[(_0x2ff0a7(0x1c4))]('VisionDown'),topicMessage['topic']=_0x2ff0a7(0x1e5),client[_0x2ff0a7(0x20d)](topicMessage);}function emptyVisionMode(){var _0x4a2e8e=a0_0x3c24;topicMessage=new Paho[(_0x4a2e8e(0x1c4))](_0x4a2e8e(0x206)),topicMessage[_0x4a2e8e(0x1cd)]='cait/vision_control',client[_0x4a2e8e(0x20d)](topicMessage);}function stopVoice(){var _0x5cc2c3=a0_0x3c24;topicMessage=new Paho[(_0x5cc2c3(0x1c4))]('VoiceDown'),topicMessage['topic']=_0x5cc2c3(0x204),client[_0x5cc2c3(0x20d)](topicMessage);}function resetModules(){var _0x68f16e=a0_0x3c24;topicMessage=new Paho[(_0x68f16e(0x1c4))]('Reset'),topicMessage['topic']=_0x68f16e(0x1f6),client[_0x68f16e(0x20d)](topicMessage);}function enableChileBlock(_0x2213c8){var _0x187ecb=a0_0x3c24,_0x536a1c=_0x2213c8['childBlocks_'];if(_0x536a1c[_0x187ecb(0x1ca)]>0x0)for(i in _0x536a1c){_0x536a1c[i][_0x187ecb(0x21f)](!![]),enableChileBlock(_0x536a1c[i]);}else return;}function disableChileBlock(_0x34eb24){var _0x25fa48=a0_0x3c24,_0x56aa0f=_0x34eb24['childBlocks_'];if(_0x56aa0f['length']>0x0)for(i in _0x56aa0f){_0x56aa0f[i][_0x25fa48(0x21f)](![]),disableChileBlock(_0x56aa0f[i]);}else return;}function updateFunction(_0x559e68){var _0x2054f8=a0_0x3c24,_0x2eb260=workspace[_0x2054f8(0x20e)](_0x559e68[_0x2054f8(0x1c3)]),_0x197fd9=workspace['getAllBlocks']();_0x559e68[_0x2054f8(0x21d)]==Blockly[_0x2054f8(0x212)][_0x2054f8(0x1dd)]&&(_0x559e68[_0x2054f8(0x1d0)]==_0x2054f8(0x20b)&&((_0x559e68['oldValue']=='color_name'||_0x559e68['oldValue']==_0x2054f8(0x1d4))&&_0x2eb260[_0x2054f8(0x219)]('param_input')[_0x2054f8(0x1c7)](_0x2054f8(0x1dc)),(_0x559e68[_0x2054f8(0x1c2)]==_0x2054f8(0x1cb)||_0x559e68['newValue']=='brightness_pct')&&_0x2eb260[_0x2054f8(0x219)](_0x2054f8(0x1f0))[_0x2054f8(0x1e7)](new Blockly[(_0x2054f8(0x21a))](),_0x2054f8(0x1dc)),_0x559e68[_0x2054f8(0x1db)]==_0x2054f8(0x1c9)&&(_0x2eb260[_0x2054f8(0x219)](_0x2054f8(0x1ce))['setVisible'](!![]),_0x2eb260[_0x2054f8(0x219)](_0x2054f8(0x1e3))['setVisible'](!![]),_0x2eb260[_0x2054f8(0x207)](_0x2054f8(0x216))[_0x2054f8(0x1e4)](!![]),_0x2eb260[_0x2054f8(0x1fa)]()),_0x559e68['newValue']=='on_device'&&(_0x2eb260[_0x2054f8(0x219)](_0x2054f8(0x1ce))['setVisible'](![]),_0x2eb260[_0x2054f8(0x219)](_0x2054f8(0x1e3))[_0x2054f8(0x1e4)](![]),_0x2eb260[_0x2054f8(0x207)](_0x2054f8(0x216))[_0x2054f8(0x1e4)](![]),_0x2eb260['render']()),_0x559e68[_0x2054f8(0x1db)]=='virtual'&&(_0x2eb260[_0x2054f8(0x219)]('proc_param')[_0x2054f8(0x1c7)]('on'),_0x2eb260['getInput']('proc_param')['removeField'](_0x2054f8(0x1d9))),_0x559e68[_0x2054f8(0x1c2)]==_0x2054f8(0x1d8)&&(_0x2eb260[_0x2054f8(0x219)](_0x2054f8(0x205))[_0x2054f8(0x1e7)](new Blockly[(_0x2054f8(0x21c))]('on'),'on'),_0x2eb260[_0x2054f8(0x219)](_0x2054f8(0x205))[_0x2054f8(0x1e7)](new Blockly[(_0x2054f8(0x1e2))](function(){var _0x641965=_0x2054f8,_0x2afdc2=[],_0x39c7cc=virtual_processors['Vision'];if(_0x39c7cc['length']>0x0)for(i in _0x39c7cc){_0x2afdc2[_0x641965(0x1e6)]([_0x39c7cc[i],_0x39c7cc[i]]);}else _0x2afdc2[_0x641965(0x1e6)]([_0x641965(0x1f2),'none']);return _0x2afdc2;}),_0x2054f8(0x1d9)))));if(_0x559e68[_0x2054f8(0x21d)]==Blockly[_0x2054f8(0x212)][_0x2054f8(0x210)]){if(_0x2eb260[_0x2054f8(0x21d)]==_0x2054f8(0x1cf))for(blk in _0x197fd9){if(_0x197fd9[blk]['type']==_0x2054f8(0x1cf)&&_0x197fd9[blk]!=_0x2eb260){_0x2eb260[_0x2054f8(0x21f)](![]);break;}else _0x2eb260[_0x2054f8(0x21f)](!![]);}else{if(_0x2eb260['type']==_0x2054f8(0x1fd)){var _0x376fd9=![];for(blk in _0x197fd9){if(_0x197fd9[blk]['type']==_0x2054f8(0x1fd)&&_0x197fd9[blk]!=_0x2eb260){_0x2eb260[_0x2054f8(0x21f)](![]);break;}else _0x2eb260[_0x2054f8(0x21f)](!![]);_0x197fd9[blk][_0x2054f8(0x21d)]=='setup_block'&&(_0x376fd9=!![]);}!_0x376fd9&&_0x2eb260[_0x2054f8(0x21f)](![]);}}}if(_0x559e68[_0x2054f8(0x21d)]==Blockly[_0x2054f8(0x212)][_0x2054f8(0x214)]){var _0x3d619f=workspace[_0x2054f8(0x20e)](_0x559e68[_0x2054f8(0x200)]);if(_0x2eb260!=null){if(_0x2eb260[_0x2054f8(0x21d)]==_0x2054f8(0x20c)||_0x2eb260[_0x2054f8(0x21d)]==_0x2054f8(0x1ec)||_0x2eb260[_0x2054f8(0x21d)]==_0x2054f8(0x1c5)||_0x2eb260[_0x2054f8(0x21d)]=='init_control'||_0x2eb260[_0x2054f8(0x21d)]==_0x2054f8(0x1f9)){var _0x257384=![];while(_0x3d619f!=null){if(_0x3d619f[_0x2054f8(0x21d)]=='setup_block'){_0x257384=!![],_0x2eb260['setEnabled'](!![]),enableChileBlock(_0x2eb260);break;}else _0x3d619f=_0x3d619f[_0x2054f8(0x21e)];}!_0x257384&&(_0x2eb260['setEnabled'](![]),disableChileBlock(_0x2eb260));}else{if(_0x2eb260[_0x2054f8(0x21d)]==_0x2054f8(0x1cf)){var _0xff8da5=![];for(blk in _0x197fd9){_0x197fd9[blk][_0x2054f8(0x21d)]==_0x2054f8(0x1cf)&&_0x197fd9[blk]!=_0x2eb260&&(_0x197fd9[blk]['isEnabled']()&&(_0xff8da5=!![]));}_0xff8da5&&_0x2eb260['setEnabled'](![]);for(blk in _0x197fd9){if(_0x197fd9[blk]['type']=='main_block'){_0x197fd9[blk][_0x2054f8(0x21f)](!![]);break;}}}else{if(_0x2eb260[_0x2054f8(0x21d)]=='main_block'){var _0x376fd9=![],_0xff8da5=![];for(blk in _0x197fd9){_0x197fd9[blk][_0x2054f8(0x21d)]=='main_block'&&_0x197fd9[blk]!=_0x2eb260&&(_0x197fd9[blk][_0x2054f8(0x1fe)]()&&(_0xff8da5=!![]));}_0xff8da5&&_0x2eb260[_0x2054f8(0x21f)](![]);for(blk in _0x197fd9){_0x197fd9[blk][_0x2054f8(0x21d)]==_0x2054f8(0x1cf)&&(_0x376fd9=!![]);}!_0x376fd9&&_0x2eb260['setEnabled'](![]);}else{var _0x52d6e7=![];while(_0x3d619f!=null){if(_0x3d619f[_0x2054f8(0x21d)]==_0x2054f8(0x1fd)||_0x3d619f[_0x2054f8(0x21d)][_0x2054f8(0x1da)](_0x2054f8(0x1fc))!=-0x1){_0x52d6e7=!![],_0x2eb260[_0x2054f8(0x21f)](!![]),enableChileBlock(_0x2eb260);break;}else _0x3d619f=_0x3d619f[_0x2054f8(0x21e)];}!_0x52d6e7&&(_0x2eb260[_0x2054f8(0x21f)](![]),disableChileBlock(_0x2eb260),_0x2eb260['type'][_0x2054f8(0x1da)](_0x2054f8(0x20a))!=-0x1&&emptyVisionMode());}}}_0x2eb260[_0x2054f8(0x21d)]==_0x2054f8(0x1d6)&&_0x2eb260[_0x2054f8(0x21e)]!=null&&_0x2eb260[_0x2054f8(0x21f)](!![]),_0x2eb260[_0x2054f8(0x21e)]!=null&&(_0x2eb260[_0x2054f8(0x21e)][_0x2054f8(0x21d)]=='set_parameter'&&!_0x2eb260[_0x2054f8(0x21e)]['isDisabled']&&_0x2eb260[_0x2054f8(0x21f)](!![])),_0x2eb260['type'][_0x2054f8(0x1da)]('procedures_')!=-0x1&&_0x2eb260[_0x2054f8(0x21f)](!![]);}}if(_0x559e68['type']==Blockly[_0x2054f8(0x212)][_0x2054f8(0x1c6)]){var _0x1fbaab=![];for(blk in _0x197fd9){_0x197fd9[blk][_0x2054f8(0x21d)]==_0x2054f8(0x1cf)&&(_0x1fbaab=!![]);}if(_0x559e68[_0x2054f8(0x1df)][_0x2054f8(0x1ed)](_0x2054f8(0x21d))==_0x2054f8(0x1cf)){for(blk in _0x197fd9){if(_0x197fd9[blk]['type']=='setup_block'){_0x197fd9[blk][_0x2054f8(0x21f)](!![]);break;}}for(blk in _0x197fd9){if(_0x197fd9[blk][_0x2054f8(0x21d)]=='main_block'){if(_0x1fbaab){_0x197fd9[blk][_0x2054f8(0x21f)](!![]);break;}else _0x197fd9[blk][_0x2054f8(0x21f)](![]);}}}else{if(_0x559e68['oldXml'][_0x2054f8(0x1ed)](_0x2054f8(0x21d))==_0x2054f8(0x1fd))for(blk in _0x197fd9){if(_0x197fd9[blk][_0x2054f8(0x21d)]==_0x2054f8(0x1fd)){if(_0x1fbaab){_0x197fd9[blk]['setEnabled'](!![]);break;}}}}}}var stopCode=![];function run_code(){var _0x37aa06=a0_0x3c24;stopCode=![],Blockly[_0x37aa06(0x1f7)][_0x37aa06(0x209)](_0x37aa06(0x1ee));var _0x3fa666=Blockly['JavaScript'][_0x37aa06(0x208)](workspace);save_workspace(!![]);try{if(_0x3fa666['indexOf'](_0x37aa06(0x1d3))!=-0x1){_0x3fa666[_0x37aa06(0x1da)]('function')!=-0x1&&((_0x3fa666[_0x3fa666[_0x37aa06(0x1da)]('function')-0x1]!='_'||_0x3fa666[_0x3fa666[_0x37aa06(0x1da)](_0x37aa06(0x1ea))+0x8]!='_')&&(_0x3fa666=replaceAll(_0x3fa666,'function',_0x37aa06(0x1ff))));async_function=[],index=0x0;while(_0x3fa666[_0x37aa06(0x1da)](_0x37aa06(0x1ff),index)!=-0x1){begin_idx=_0x3fa666[_0x37aa06(0x1da)]('async\x20function',index)+0xf,end_idx=_0x3fa666[_0x37aa06(0x1da)]('(',begin_idx),func_name=_0x3fa666['substring'](begin_idx,end_idx),func_name['indexOf'](_0x37aa06(0x1ff))!=-0x1?end_idx=begin_idx:async_function[_0x37aa06(0x1e6)](func_name),index=end_idx;}console[_0x37aa06(0x215)](_0x37aa06(0x1f4)+async_function),init_idx=_0x3fa666[_0x37aa06(0x1da)]('await\x20init_'),runtime_code=_0x3fa666[_0x37aa06(0x21b)](init_idx,_0x3fa666['length']);for(f in async_function){runtime_code=replaceAll(runtime_code,async_function[f],'await\x20'+async_function[f]);}_0x3fa666=_0x3fa666[_0x37aa06(0x21b)](0x0,init_idx)+runtime_code,_0x3fa666='(async\x20()\x20=>\x20{'+_0x3fa666+'})().catch(error\x20=>\x20alert(error.message));';}var _0x1b742e=!![];for(i in vision_func){if(_0x3fa666['indexOf'](vision_func[i])!=-0x1){if(_0x3fa666[_0x37aa06(0x1da)](_0x37aa06(0x20c))==-0x1){alert(localizedStrings[_0x37aa06(0x1d2)][locale]),_0x1b742e=![];break;}}}for(i in speech_func){if(_0x3fa666[_0x37aa06(0x1da)](speech_func[i])!=-0x1){if(_0x3fa666[_0x37aa06(0x1da)]('init_voice')==-0x1){alert(localizedStrings[_0x37aa06(0x1fb)][locale]),_0x1b742e=![];break;}}}for(i in nlp_func){if(_0x3fa666[_0x37aa06(0x1da)](nlp_func[i])!=-0x1){if(_0x3fa666['indexOf'](_0x37aa06(0x1c5))==-0x1){alert(localizedStrings['nlpNotInit'][locale]),_0x1b742e=![];break;}}}for(i in control_func){if(_0x3fa666['indexOf'](control_func[i])!=-0x1){if(_0x3fa666[_0x37aa06(0x1da)](_0x37aa06(0x222))==-0x1){alert(localizedStrings[_0x37aa06(0x217)][locale]),_0x1b742e=![];break;}}}for(i in smart_home_func){if(_0x3fa666[_0x37aa06(0x1da)](smart_home_func[i])!=-0x1){if(_0x3fa666['indexOf'](_0x37aa06(0x1f9))==-0x1){alert(localizedStrings[_0x37aa06(0x1cc)][locale]),_0x1b742e=![];break;}}}console[_0x37aa06(0x215)](_0x3fa666),_0x1b742e&&eval(_0x3fa666);}catch(_0x1b11e5){alert(_0x1b11e5['message']);}}$(document)['ready'](function(){var _0x246fd1=a0_0x3c24;window[_0x246fd1(0x20f)][_0x246fd1(0x1c8)]=='#reload'&&onReload();});function onReload(){var _0x5cf102=a0_0x3c24;window[_0x5cf102(0x20f)]['hash']='',load_workspace(!![]);}function stop_code(){var _0x3022ee=a0_0x3c24;window['location'][_0x3022ee(0x1c8)]='#reload',location[_0x3022ee(0x202)]();}async function gen_py_code(){var _0x1696ec=a0_0x3c24;Blockly['Python'][_0x1696ec(0x209)](_0x1696ec(0x1ee));var _0x2bcfb2=Blockly['Python'][_0x1696ec(0x208)](workspace),_0x2bb2a5;_0x2bb2a5=prompt(localizedStrings[_0x1696ec(0x221)][locale]);if(_0x2bb2a5!=''){const _0x20b833=await $[_0x1696ec(0x1e0)]({'url':_0x1696ec(0x203),'type':_0x1696ec(0x1d1),'data':{'filename':_0x2bb2a5,'code':_0x2bcfb2}});}}async function gen_py_notebook(){var _0x4b9ead=a0_0x3c24;Blockly['Python'][_0x4b9ead(0x209)](_0x4b9ead(0x1ee));var _0x3febff=Blockly[_0x4b9ead(0x1e8)][_0x4b9ead(0x208)](workspace),_0x396cb1;_0x396cb1=prompt(localizedStrings[_0x4b9ead(0x1f5)][locale]);if(_0x396cb1!=''){const _0x21eb8e=await $[_0x4b9ead(0x1e0)]({'url':_0x4b9ead(0x213),'type':'POST','data':{'filename':_0x396cb1,'code':_0x3febff}});}}async function save_workspace(_0x95b556=![]){var _0x145cc5=a0_0x3c24,_0x4beba8=Blockly[_0x145cc5(0x1f3)][_0x145cc5(0x211)](workspace),_0x4f3581=Blockly[_0x145cc5(0x1f3)][_0x145cc5(0x1ef)](_0x4beba8),_0x32aa71,_0x52eb24;_0x95b556?(save_type='autosave',_0x32aa71='workspace_autosave.xml'):(save_type=_0x145cc5(0x1d5),_0x32aa71=prompt(localizedStrings[_0x145cc5(0x1e9)][locale]));if(_0x32aa71!=''){const _0x1502b8=await $[_0x145cc5(0x1e0)]({'url':_0x145cc5(0x1e1),'type':'POST','data':{'filename':_0x32aa71,'xml_text':_0x4f3581,'save_type':save_type}});}}async function new_workspace(){var _0x5d0bd2=a0_0x3c24;workspace[_0x5d0bd2(0x218)]()['length']>0x0&&(confirm(localizedStrings[_0x5d0bd2(0x201)][locale])&&await save_workspace()),location['reload']();}async function load_workspace(_0x517287=![]){var _0xd01c45=a0_0x3c24,_0x2457f2,_0x4f498e,_0x3dc08d;_0x517287?(save_type=_0xd01c45(0x1d7),_0x2457f2=_0xd01c45(0x1f1)):(save_type='save',_0x2457f2=prompt(localizedStrings['loadName'][locale]));const _0xbf1837=await $['ajax']({'url':_0xd01c45(0x1eb),'type':'POST','data':{'filename':_0x2457f2,'save_type':save_type}});xml_text=_0xbf1837[_0xd01c45(0x1f8)];if(xml_text!=''){var _0x1a88b5=Blockly['Xml'][_0xd01c45(0x1de)](xml_text);Blockly['Xml'][_0xd01c45(0x220)](_0x1a88b5,workspace);}}